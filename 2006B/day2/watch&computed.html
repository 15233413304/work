<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="app">
        <input type="text" placeholder="请输入手机号" v-model="option.phoneNumber">
        <button>登陆</button>
        <div>
            {{newNumber}}
        </div>
    </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/vue@2.7.10"></script>
<script>
    new Vue({
        el:'#app',
        data(){
            return {
                phoneNumber:'',
                newNumber:'',
                option:{
                    userName:'章三',
                    phoneNumber: '133'
                }
            }
        },
        // methods: {
        //     handleInput(){
        //         console.log(this.phoneNumber)
        //     }
        // },
        // mounted() {
        //     this.handleInput()
        // },
        watch: {
            // phoneNumber(newValue,oldValue){
            //     this.newNumber = newValue
            // },
            // 如果需要监听的是对象，我们需要用watch的deep属性来深度监听（无论层级有多深）
            // 如果我们第一次进页面需要进行watch  那么 开启immediate
            // 因为他们指向同一个数组或对象，vue不会保留变更前的副本 怎么解决？（computed 可以缓存下来，每一次生成新的对象）

            // option:{
            //     handler:function(newValue,oldValue){
            //         console.log(newValue.phoneNumber,oldValue?.phoneNumber)
            //     },
            //     deep:true,
            //     // 是否第一次进页面就执行watch 默认是false
            //     immediate:true
            // }
            // newOption:{
            //     handler:function(newValue,oldValue){
            //         console.log(newValue.phoneNumber,oldValue?.phoneNumber)
            //     },
            //     deep:true,
            //     // 是否第一次进页面就执行watch 默认是false
            //     immediate:true,
            //  }
        },
        computed:{ 
            newOption(){
                return JSON.parse(JSON.stringify(this.option))
            }
        }

    })
</script>
</html>